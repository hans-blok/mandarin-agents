{
  "tasks": [
    {
      "label": "Canon: pull + copy hash",
      "type": "shell",
      "command": "cd ../mandarin-canon; git pull --ff-only; git rev-parse --short HEAD | Set-Clipboard",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Agent: Execute (Generate + Save)",
      "type": "process",
      "command": "powershell",
      "args": [
        "-Command",
        "$timestamp = Get-Date -Format 'yyyyMMddHHmmss'; $agent = '${input:agentName}'; $intent = '${input:intentName}'; $hashInput = $timestamp + $agent; $md5 = [System.Security.Cryptography.MD5]::Create(); $hashBytes = $md5.ComputeHash([System.Text.Encoding]::UTF8.GetBytes($hashInput)); $hash = [System.BitConverter]::ToString($hashBytes).Replace('-','').Substring(0,4).ToLower(); $filename = \"agent-execution/$hash.$agent.$intent.md\"; [Console]::OutputEncoding = [System.Text.Encoding]::UTF8; $env:PYTHONIOENCODING='utf-8'; python scripts/generate_instructions.py --agent $agent --intent $intent --execution-file $filename; if ($LASTEXITCODE -eq 0) { code $filename }"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    }
  ]
}
